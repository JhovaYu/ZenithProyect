<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Perfil</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <ion-card>
    <ion-card-header>
      <ion-avatar class="ion-margin-auto">
        <img [src]="profileImage" alt="Foto de perfil">
        <ion-icon name="camera" class="edit-avatar" (click)="changeProfileImage()"></ion-icon>
      </ion-avatar>
      <ion-card-title class="ion-text-center ion-margin-top">
        {{ teacherName }} {{ teacherLastName }}
        <ion-icon name="create-outline" class="edit-icon" (click)="toggleEdit('name')"></ion-icon>
      </ion-card-title>
      <ion-card-subtitle class="ion-text-center">{{ teacherEmail }}</ion-card-subtitle>
    </ion-card-header>

    <ion-card-content>
      <form [formGroup]="profileForm" (ngSubmit)="onSubmit()">
        <ion-item>
          <ion-label position="floating">Nombre</ion-label>
          <ion-input formControlName="nombre" type="text" [readonly]="!isEditing('name')"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label position="floating">Apellidos</ion-label>
          <ion-input formControlName="apellido" type="text" [readonly]="!isEditing('name')"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label position="floating">Correo electrónico</ion-label>
          <ion-input formControlName="email" type="email" readonly></ion-input>
        </ion-item>

        <ion-button *ngIf="isEditing('name')" expand="block" type="submit" class="ion-margin-top" [disabled]="!profileForm.valid">
          Guardar cambios
        </ion-button>
      </form>

      <ion-button expand="block" color="secondary" class="ion-margin-top" (click)="changePassword()">
        Cambiar contraseña
      </ion-button>
    </ion-card-content>
  </ion-card>

  <ion-button expand="block" color="danger" class="ion-margin-top" (click)="logout()">
    Cerrar sesión
  </ion-button>
</ion-content>
